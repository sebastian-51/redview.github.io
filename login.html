<!DOCTYPE html>
<html lang="es" data-lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="login_title">Iniciar Sesi√≥n - REDVIEWER</title>
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/12.9.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/12.9.0/firebase-database-compat.js"></script>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }

        /* Fondo animado de estrellas */
        #stars-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        .star {
            position: absolute;
            background-color: #fff;
            border-radius: 50%;
            animation: twinkle var(--duration) infinite ease-in-out;
            opacity: var(--opacity);
            width: var(--size);
            height: var(--size);
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.2; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.2); }
        }

        :root{
            --bgGlass: rgba(255, 255, 255, 0.08);
            --borderGlass: rgba(255, 255, 255, 0.12);
            --accent1: #667eea;
            --accent2: #764ba2;
            --accent3: #f093fb;
            --muted: #a0a0c0;
            --danger1: #ff6b6b;
            --danger2: #ee5a24;
        }

        /* Ajustar z-index del contenido */
        .navbar, .login-container, footer, .back-button {
            position: relative;
            z-index: 10;
        }

        /* ================= Barra de navegaci√≥n ================= */
        .navbar {
            background: rgba(15, 12, 41, 0.95);
            padding: 14px 5%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            box-shadow: 0 2px 20px rgba(0, 0, 0, 0.5);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            gap: 12px;
        }

        .logo {
            font-size: 1.55em;
            font-weight: 800;
            color: var(--accent1);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 10px;
            white-space: nowrap;
        }

        .nav-right {
            display: flex;
            align-items: center;
            gap: 10px;
            flex-wrap: wrap;
        }

        .lang-wrap { position: relative; }
        .lang-wrap::after{
            content: "‚ñæ";
            position: absolute;
            left: calc(100% - 22px);
            top: 50%;
            transform: translateY(-50%);
            pointer-events: none;
            color: rgba(249, 247, 247, 0.923);
            font-size: 0.9em;
        }

        .lang-select {
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            background: rgba(11, 11, 11, 0.08);
            border: 1px solid rgba(102,126,234,0.35);
            color: #f6f6f6;
            padding: 8px 28px 8px 12px;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 700;
            font-size: 0.92em;
            outline: none;
        }
        .lang-select:focus{
            border-color:#764ba2;
            box-shadow:0 0 12px rgba(118,75,162,0.5);
            background-color:#25224a;
        }
        .lang-select option{
            background-color:#1e1b37;
            color:#fff;
        }

        .hamburger {
            display: none;
            background: rgba(255,255,255,0.06);
            border: 1px solid rgba(255,255,255,0.12);
            color: #fff;
            border-radius: 12px;
            padding: 10px 12px;
            cursor: pointer;
            line-height: 1;
            font-size: 1.05em;
            -webkit-tap-highlight-color: transparent;
        }

        .mobile-menu {
            display: none;
            width: 100%;
            background: rgba(15, 12, 41, 0.98);
            border-top: 1px solid rgba(255,255,255,0.08);
            padding: 12px 5% 14px;
            position: fixed;
            top: 70px;
            left: 0;
            z-index: 999;
        }
        .mobile-menu.active { display: block; }
        .mobile-menu .nav-links {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            gap: 10px;
            padding: 8px 0 10px;
        }
        .mobile-menu .nav-links a {
            color: #fff;
            text-decoration: none;
            font-weight: 600;
            transition: color 0.3s;
            font-size: 0.98em;
            white-space: nowrap;
        }
        .mobile-menu .nav-links a:hover { color: var(--accent1); }

        /* Bot√≥n de regresar Dentro de la barra de navegaci√≥n */
        .back-button {
            position: fixed;
            top: 80px;
            left: 20px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.2);
            padding: 8px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
            z-index: 20;
            backdrop-filter: blur(5px);
        }

        .back-button:hover {
            background: rgba(102, 126, 234, 0.3);
            border-color: #667eea;
            transform: translateX(-5px);
        }

        /* ===== Contenedor login (centrado) ===== */
        .login-container {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 20px;
            padding: 40px;
            width: 100%;
            max-width: 500px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
            overflow: hidden;
            margin-top: 80px; /* espacio para navbar */
            z-index: 10;
            backdrop-filter: blur(5px);
        }

        .login-container::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(102, 126, 234, 0.2) 0%, transparent 70%);
            z-index: 0;
        }

        .login-content {
            position: relative;
            z-index: 1;
        }

        .logo h1 {
            font-size: 2em;
            background: linear-gradient(45deg, #667eea, #764ba2, #f093fb);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 5px;
            text-align: center;
        }

        .logo p {
            color: var(--muted);
            font-size: 1.35em;
            text-align: center;
            margin-bottom: 15px;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #e0e0ff;
        }

        .form-group input {
            width: 100%;
            padding: 15px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 16px;
            transition: all 0.3s;
        }

        .form-group input:focus {
            outline: none;
            border-color: #667eea;
            background: rgba(255, 255, 255, 0.15);
            box-shadow: 0 0 15px rgba(102, 126, 234, 0.3);
        }

        .form-options {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            font-size: 0.9em;
        }

        .remember-me {
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--muted);
        }

        .forgot-password {
            color: var(--accent1);
            text-decoration: none;
            transition: color 0.3s;
        }

        .forgot-password:hover {
            color: var(--accent3);
        }

        .btn-login {
            width: 100%;
            padding: 15px;
            background: linear-gradient(45deg, var(--accent1), var(--accent2));
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: bold;
            transition: all 0.3s;
            margin-bottom: 20px;
        }

        .btn-login:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.5);
        }

        .btn-google {
            width: 100%;
            padding: 12px;
            background: white;
            color: #333;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .btn-google:hover {
            background: #f5f5f5;
            transform: translateY(-2px);
        }

        .divider {
            display: flex;
            align-items: center;
            margin: 25px 0;
            color: var(--muted);
        }

        .divider::before,
        .divider::after {
            content: '';
            flex: 1;
            height: 1px;
            background: rgba(255, 255, 255, 0.1);
        }

        .divider span {
            padding: 0 15px;
        }

        .signup-link {
            text-align: center;
            color: var(--muted);
            font-size: 0.95em;
            margin-top: 20px;
        }

        .signup-link a {
            color: var(--accent1);
            text-decoration: none;
            font-weight: bold;
            transition: color 0.3s;
        }

        .signup-link a:hover {
            color: var(--accent3);
        }

        .error-message {
            background: rgba(255, 107, 107, 0.2);
            border: 1px solid #ff6b6b;
            color: #ff6b6b;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: none;
        }

        .success-message {
            background: rgba(52, 168, 83, 0.2);
            border: 1px solid #34a853;
            color: #34a853;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: none;
        }

        /* Loading overlay */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(15, 12, 41, 0.95);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 3000;
            display: none;
        }

        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 6px solid rgba(102, 126, 234, 0.3);
            border-top-color: #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .loading-text {
            color: white;
            margin-top: 20px;
            font-size: 1.2em;
        }

        /* Pie de pagina */
        footer {
            background: rgba(10, 8, 27, 0.95);
            padding: 15px;
            text-align: center;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 0.85em;
            width: 100%;
            margin-top: 30px;
            z-index: 10;
            position: relative;
        }

        .creator-name {
            color: var(--accent1);
            font-weight: bold;
        }

        .creator-russian {
            color: var(--accent2);
            font-weight: bold;
            margin-top: 3px;
            display: block;
        }

        @media (max-width: 768px) {
            .navbar .nav-links { display: none; }
            .hamburger { display: inline-flex; }
            .back-button { top: 70px; }
            .login-container { margin-top: 90px; padding: 30px; }
        }
    </style>
</head>
<body>
    <!-- Aqu√≠ se contienen las estrellas animadas -->
    <div id="stars-container"></div>

    <!-- Barra de navegaci√≥n pero sin enlace de perfil -->
    <nav class="navbar">
        <a href="index.html" class="logo">üõ∞Ô∏è REDVIEWER</a>
        <div class="nav-right">
            <div class="lang-wrap">
                <select class="lang-select" id="languageSelect" aria-label="Select language">
                    <option value="es">ES</option>
                    <option value="en">EN</option>
                    <option value="ru">RU</option>
                </select>
            </div>
            <button class="hamburger" id="hamburgerBtn" aria-label="Open menu">‚ò∞</button>
        </div>
    </nav>

    <!-- Men√∫ m√≥vil -->
    <div class="mobile-menu" id="mobileMenu">
        <div class="nav-links">
            <a href="index.html" data-i18n="nav_home">Inicio</a>
            <a href="profile.html" data-i18n="nav_profile">Perfil</a>
            <a href="create-post.html" data-i18n="nav_new">Nueva Observaci√≥n</a>
            <a href="faq.html" data-i18n="nav_help">‚ùì Ayuda</a>
        </div>
    </div>

    <!-- Bot√≥n de regresar flotante -->
    <a href="index.html" class="back-button" data-i18n="back_btn">‚Üê Regresar a Inicio</a>

    <div class="login-container">
        <div class="login-content">
            <div class="logo">
                <h1>üõ∞Ô∏è REDVIEWER</h1> 
            </div>
            <!--aqu√≠ basicamente tuve que hacer dos comandos div para que tuviera ese salto de linea-->
            <div class="logo">
             <p data-i18n="login_subtitle"><br>= Conecta con el espacio =</p>
            </div>

            <div class="error-message" id="errorMessage"></div>
            <div class="success-message" id="successMessage"></div>

            <form id="loginForm">
                <div class="form-group">
                    <label for="email" data-i18n="login_email_label">Correo Electr√≥nico</label>
                    <input type="email" id="email" placeholder="tu@email.com" required data-i18n-placeholder="login_email_placeholder">
                </div>

                <div class="form-group">
                    <label for="password" data-i18n="login_password_label">Contrase√±a</label>
                    <input type="password" id="password" placeholder="********" required data-i18n-placeholder="login_password_placeholder">
                </div>

                <div class="form-options">
                    <label class="remember-me">
                        <input type="checkbox" id="remember"> <span data-i18n="login_remember">Recu√©rdame</span>
                    </label>
                    <a href="#" class="forgot-password" data-i18n="login_forgot">¬øOlvidaste tu contrase√±a?</a>
                </div>

                <button type="submit" class="btn-login" data-i18n="login_btn">üöÄ Iniciar Sesi√≥n</button>
            </form>

            <div class="divider">
                <span data-i18n="login_or">O contin√∫a con</span>
            </div>

            <!-- Google Sign-In Button (se usar√° con la traducci√≥n din√°mica del texto, pero el bot√≥n es de Google) -->
            <div id="g_id_onload"
                data-client_id="YOUR_GOOGLE_CLIENT_ID"
                data-callback="handleCredentialResponse"
                data-auto_prompt="false">
            </div>
            <div class="g_id_signin"
                data-type="standard"
                data-size="large"
                data-theme="outline"
                data-text="sign_in_with"
                data-shape="rectangular"
                data-logo_alignment="left"
                data-width="400">
            </div>

            <div style="text-align: center; margin: 15px 0; color: var(--muted); font-size: 0.85em;">
                <p data-i18n="login_secure">üîí Tu informaci√≥n est√° segura con nosotros</p>
            </div>

            <div class="signup-link">
                <span data-i18n="login_no_account">¬øNo tienes cuenta?</span> <a href="register.html" data-i18n="login_signup_link">Reg√≠strate gratis</a>
            </div>
        </div>
    </div>

    <!-- Cargar Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div style="text-align: center;">
            <div class="loading-spinner"></div>
            <div class="loading-text" data-i18n="login_loading">Iniciando sesi√≥n...</div>
        </div>
    </div>

    <!-- Pie de pagina -->
    <footer>
        <p><span data-i18n="footer_created_by">Creado por</span> <span class="creator-name">Sebastian Sifuentes Zavala</span></p>
        <p class="creator-russian">–°–æ–∑–¥–∞–Ω–æ –°–µ–±–∞—Å—Ç—å—è–Ω–æ–º –°–∏—Ñ—É—ç–Ω—Ç–µ—Å –ó–∞–≤–∞–ª–∞</p>
        <p>&copy; 2026 REDVIEWER. <span data-i18n="footer_rights_ru">–í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</span></p>
    </footer>

    <script>
        // ========= SISTEMA DE INTERNACIONALIZACI√ìN (i18n) =========
        const I18N = {
            es: {
                // Generales (para barra de navegaci√≥n y pie de pagina)
                nav_home: "Inicio",
                nav_profile: "Perfil",
                nav_new: "Nueva Observaci√≥n",
                nav_help: "‚ùì Ayuda",
                footer_created_by: "Creado por",
                footer_rights_ru: "Todos los derechos reservados.",

                // Espec√≠ficos de login
                login_title: "Iniciar Sesi√≥n - REDVIEWER",
                back_btn: "‚Üê Regresar a Inicio",
                login_subtitle: "= Conecta con el espacio =",
                login_email_label: "Correo Electr√≥nico",
                login_email_placeholder: "tu@email.com",
                login_password_label: "Contrase√±a",
                login_password_placeholder: "********",
                login_remember: "Recu√©rdame",
                login_forgot: "¬øOlvidaste tu contrase√±a?",
                login_btn: "üöÄ Iniciar Sesi√≥n",
                login_or: "O contin√∫a con",
                login_secure: "üîí Tu informaci√≥n est√° segura con nosotros",
                login_no_account: "¬øNo tienes cuenta?",
                login_signup_link: "Reg√≠strate gratis",
                login_loading: "Iniciando sesi√≥n...",
                login_error_invalid: "Correo o contrase√±a incorrectos",
                login_success: "¬°Bienvenido de nuevo! üöÄ",
                login_welcome_google: "¬°Bienvenido, {username}! üöÄ",
                login_google_error: "Error al procesar la autenticaci√≥n de Google"
            },
            en: {
                nav_home: "Home",
                nav_profile: "Profile",
                nav_new: "New Sighting",
                nav_help: "‚ùì Help",
                footer_created_by: "Created by",
                footer_rights_ru: "All rights reserved.",

                login_title: "Log In - REDVIEWER",
                back_btn: "‚Üê Back to Home",
                login_subtitle: "= Connect with space =",
                login_email_label: "Email : ",
                login_email_placeholder: "your@email.com",
                login_password_label: "Password : ",
                login_password_placeholder: "********",
                login_remember: "Remember me",
                login_forgot: "Forgot password?",
                login_btn: "üöÄ Log In",
                login_or: "Or continue with",
                login_secure: "üîí Your information is safe with us",
                login_no_account: "Don't have an account?",
                login_signup_link: "Sign up for free",
                login_loading: "Logging in...",
                login_error_invalid: "Invalid email or password",
                login_success: "Welcome back! üöÄ",
                login_welcome_google: "Welcome, {username}! üöÄ",
                login_google_error: "Error processing Google authentication"
            },
            ru: {
                nav_home: "–ì–ª–∞–≤–Ω–∞—è",
                nav_profile: "–ü—Ä–æ—Ñ–∏–ª—å",
                nav_new: "–ù–∞–±–ª—é–¥–µ–Ω–∏–µ",
                nav_help: "‚ùì –ü–æ–º–æ—â—å",
                footer_created_by: "–°–æ–∑–¥–∞–Ω–æ",
                footer_rights_ru: "–í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.",

                login_title: "–í—Ö–æ–¥ - REDVIEWER",
                back_btn: "‚Üê –ù–∞ –≥–ª–∞–≤–Ω—É—é",
                login_subtitle: "= –°–≤—è–∑—å —Å –∫–æ—Å–º–æ—Å–æ–º =",
                login_email_label: "–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –ø–æ—á—Ç–∞ : ",
                login_email_placeholder: "–≤–∞—à@email.com",
                login_password_label: "–ü–∞—Ä–æ–ª—å : ",
                login_password_placeholder: "********",
                login_remember: "–ó–∞–ø–æ–º–Ω–∏—Ç—å –º–µ–Ω—è",
                login_forgot: "–ó–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å?",
                login_btn: "üöÄ –í–æ–π—Ç–∏",
                login_or: "–ò–ª–∏ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å",
                login_secure: "üîí –í–∞—à–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏",
                login_no_account: "–ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞?",
                login_signup_link: "–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –±–µ—Å–ø–ª–∞—Ç–Ω–æ",
                login_loading: "–í—Ö–æ–¥...",
                login_error_invalid: "–ù–µ–≤–µ—Ä–Ω—ã–π email –∏–ª–∏ –ø–∞—Ä–æ–ª—å",
                login_success: "–° –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ–º! üöÄ",
                login_welcome_google: "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, {username}! üöÄ",
                login_google_error: "–û—à–∏–±–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ Google"
            }
        };

        let currentLang = "es";

        function t(key, params = {}) {
            let text = (I18N[currentLang] && I18N[currentLang][key]) || (I18N.es[key] || key);
            // Reemplazar par√°metros {username} etc.
            for (let [k, v] of Object.entries(params)) {
                text = text.replace(`{${k}}`, v);
            }
            return text;
        }

        function applyI18n() {
            document.documentElement.lang = currentLang;
            document.documentElement.setAttribute("data-lang", currentLang);

            // Elementos con data-i18n
            document.querySelectorAll("[data-i18n]").forEach(el => {
                const key = el.getAttribute("data-i18n");
                if (key === "footer_created_by") {
                    // Solo lo que es el texto, no el span
                    el.innerHTML = t(key);
                } else {
                    el.textContent = t(key);
                }
            });

            // Placeholders
            document.querySelectorAll("[data-i18n-placeholder]").forEach(el => {
                const key = el.getAttribute("data-i18n-placeholder");
                el.setAttribute("placeholder", t(key));
            });

            // Actualizar t√≠tulo de la p√°gina
            document.title = t("login_title");
        }

        function setLanguage(lang) {
            currentLang = ["es", "en", "ru"].includes(lang) ? lang : "es";
            localStorage.setItem("lang", currentLang);
            const sel = document.getElementById("languageSelect");
            if (sel) sel.value = currentLang;
            applyI18n();
        }

        function loadLanguage() {
            const saved = localStorage.getItem("lang");
            currentLang = saved && ["es", "en", "ru"].includes(saved) ? saved : "es";
            const sel = document.getElementById("languageSelect");
            if (sel) sel.value = currentLang;
            applyI18n();
        }

        // ========= Men√∫ hamburguesa =========
        const hamburgerBtn = document.getElementById("hamburgerBtn");
        const mobileMenu = document.getElementById("mobileMenu");

        hamburgerBtn.addEventListener("click", () => {
            mobileMenu.classList.toggle("active");
            hamburgerBtn.textContent = mobileMenu.classList.contains("active") ? "‚úï" : "‚ò∞";
        });

        mobileMenu.addEventListener("click", (e) => {
            if (e.target.tagName === "A") {
                mobileMenu.classList.remove("active");
                hamburgerBtn.textContent = "‚ò∞";
            }
        });

        // ========= Fondo de estrellas animadas =========
        function createStars() {
            const container = document.getElementById("stars-container");
            const numStars = 150;

            for (let i = 0; i < numStars; i++) {
                const star = document.createElement("div");
                star.className = "star";

                const size = Math.random() * 3 + 1;
                star.style.setProperty("--size", `${size}px`);

                star.style.left = Math.random() * 100 + "%";
                star.style.top = Math.random() * 100 + "%";

                const duration = Math.random() * 4 + 2;
                star.style.setProperty("--duration", `${duration}s`);

                star.style.setProperty("--opacity", Math.random() * 0.8 + 0.2);

                container.appendChild(star);
            }
        }

        // ========= L√≥gica de login =========
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();

            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const errorMessage = document.getElementById('errorMessage');
            const successMessage = document.getElementById('successMessage');

            const users = JSON.parse(localStorage.getItem('users')) || [];
            const user = users.find(u => u.email === email && u.password === password);

            if (user) {
                errorMessage.style.display = 'none';
                successMessage.textContent = t('login_success');
                successMessage.style.display = 'block';

                localStorage.setItem('currentUser', JSON.stringify(user));
                if (document.getElementById('remember').checked) {
                    localStorage.setItem('rememberMe', 'true');
                }

                setTimeout(() => {
                    window.location.href = 'index.html';
                }, 1500);
            } else {
                successMessage.style.display = 'none';
                errorMessage.textContent = t('login_error_invalid');
                errorMessage.style.display = 'block';
            }
        });

        // Manejar Google Sign-In
        function handleCredentialResponse(response) {
            const loadingOverlay = document.getElementById('loadingOverlay');
            loadingOverlay.style.display = 'flex';

            const payload = parseJwt(response.credential);

            if (payload) {
                let users = JSON.parse(localStorage.getItem('users')) || [];
                let user = users.find(u => u.email === payload.email);

                if (!user) {
                    user = {
                        id: Date.now(),
                        username: payload.name || payload.email.split('@')[0],
                        email: payload.email,
                        password: '',
                        location: '',
                        avatar: payload.picture ? null : payload.name?.charAt(0).toUpperCase() || 'üë§',
                        googleId: payload.sub,
                        googlePicture: payload.picture,
                        createdAt: new Date().toISOString(),
                        posts: 0,
                        likes: 0,
                        followers: 0,
                        following: 0,
                        verified: true
                    };
                    users.push(user);
                    localStorage.setItem('users', JSON.stringify(users));
                }

                localStorage.setItem('currentUser', JSON.stringify(user));
                localStorage.setItem('googleAuth', 'true');

                loadingOverlay.style.display = 'none';

                // Mostrar mensaje de √©xito con el nombre de usuario
                const successMessage = document.createElement('div');
                successMessage.className = 'success-message';
                successMessage.textContent = t('login_welcome_google', { username: user.username });
                successMessage.style.display = 'block';
                document.querySelector('.login-content').prepend(successMessage);

                setTimeout(() => {
                    window.location.href = 'index.html';
                }, 1500);
            } else {
                loadingOverlay.style.display = 'none';
                alert(t('login_google_error'));
            }
        }

        function parseJwt(token) {
            try {
                const base64Url = token.split('.')[1];
                const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
                const jsonPayload = decodeURIComponent(atob(base64).split('').map(function(c) {
                    return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
                }).join(''));
                return JSON.parse(jsonPayload);
            } catch (e) {
                console.error('Error parsing JWT:', e);
                return null;
            }
        }

        // Verificar sesi√≥n guardada
        window.onload = function() {
            createStars();
            loadLanguage();
            document.getElementById("languageSelect").addEventListener("change", (e) => setLanguage(e.target.value));

            if (localStorage.getItem('rememberMe') === 'true') {
                const currentUser = localStorage.getItem('currentUser');
                if (currentUser) {
                    window.location.href = 'index.html';
                }
            }
        };
    </script>
</body>
</html>
